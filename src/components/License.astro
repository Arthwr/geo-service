---
import projectLicenseFull from "../assets/projectLicenseFull.webp";
import projectLPreview from "../assets/projectLPreview.webp";
import workLicenseFull from "../assets/workLicenseFull.webp";
import workLPreview from "../assets/workLPreview.webp";
---

<section class="mb-[100px]">
  <div class="flex justify-center items-end">
    <div class="flex justify-center">
      <span class="mb-[10px] self-end w-[3px] h-[360px] bg-mainBgColor"></span>
      <div class="flex flex-col ml-[38px]">
        <h3 class="mb-[35px] text-[64px] font-normal text-titleGreenTxtColor">
          Лицензия
        </h3>
        <p class="max-w-[619px] font-light text-[32px]">
          Мы обладаем всеми необходимыми лицензиями для профессиональной работы
          в сферах геологии и геодезии, соответствуя при этом всем международным
          и казахстанским стандартам. Наши лицензии - ваша уверенность в
          профессионализме и законности наших услуг.
        </p>
      </div>
    </div>
    <div class="gallery">
      <div
        class="img-container flex gap-10 w-full h-full object-cover cursor-pointer"
      >
        <img
          class="border"
          src={projectLPreview.src}
          data-original={projectLicenseFull.src}
          alt="Проектная лицензия"
          width="284px"
          height="402px"
          loading="lazy"
          decoding="async"
        />
        <img
          class="border"
          src={workLPreview.src}
          data-original={workLicenseFull.src}
          alt="Лицензия на изыскания"
          width="284px"
          height="402px"
          loading="lazy"
          decoding="async"
        />
      </div>
    </div>
  </div>
  <div class="modal">
    <img src={projectLicenseFull.src} alt="" class="full-img" />
    <p class="caption"></p>
  </div>
</section>

<style>
  .img-container img:hover {
    transform: scale(1.1);
  }

  .modal {
    background: rgba(0, 0, 0, 0.7);
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    pointer-events: none;
    transition: 0.25s ease-out;
  }

  .modal.open {
    opacity: 1;
    pointer-events: all;
  }

  .full-img {
    position: absolute;
    height: 70%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.5);
    transition: all 0.25s ease-out;
  }

  .full-img.open {
    transform: translate(-50%, -50%) scale(1);
  }

  .modal p {
    color: white;
    font-size: 32px;
    position: absolute;
    bottom: 5%;
    left: 50%;
    transform: translate(-50%, -5%);
  }
</style>

<script>
  const modal = document.querySelector(".modal") as HTMLElement;
  const previews = document.querySelectorAll(".gallery img");
  const original = document.querySelector(".full-img") as HTMLImageElement;
  const caption = document.querySelector(".caption") as HTMLElement;

  previews.forEach((preview) => {
    preview.addEventListener("click", () => {
      modal.classList.add("open");
      original.classList.add("open");

      // Dynamic change text and image
      const originalSrc = preview.getAttribute("data-original");
      const altText = (preview as HTMLImageElement).alt;
      original.src = originalSrc;
      caption.textContent = altText;
    });
  });

  modal.addEventListener("click", (e) => {
    if ((e.target as HTMLElement).classList.contains("modal")) {
      modal.classList.remove("open");
      original.classList.remove("open");
    }
  });
</script>
